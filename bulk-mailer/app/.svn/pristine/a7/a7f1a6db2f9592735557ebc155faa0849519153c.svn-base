DROP TABLE email;

CREATE TABLE email (
    id varchar(50) NOT NULL,
    campaign_date date NOT NULL COMMENT 'campaign launch date',
    recipient_name varchar(50) CHARACTER SET utf8 COLLATE utf8_bin DEFAULT NULL,
    user_part varchar(320) DEFAULT NULL,
    domain_part varchar(320) DEFAULT NULL,
    action_code varchar(20) DEFAULT 'imported' COMMENT 'Application: imported, queued, viewed, invalid. DSN: relayed, delayed, failed',
    status_code varchar(20) DEFAULT NULL COMMENT 'SMPT or eSMTP status code. Examples: 550 or 5.1.1',
    diagnostic_code varchar(512) DEFAULT NULL COMMENT 'human readable messages',
    created datetime NOT NULL,
    opened datetime DEFAULT NULL,
    clicked datetime DEFAULT NULL,
    -- last_update timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    PRIMARY KEY (id),
    INDEX campaign_date_index (campaign_date),
    INDEX domain_part_index (domain_part)
) ENGINE=InnoDB;
